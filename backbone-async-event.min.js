/*!
 * [backbone-async-event](https://github.com/jhudson8/backbone-async-event) v0.1.3;  MIT license; Joe Hudson<joehud@gmail.com>
 */
!function(n){"function"==typeof define&&define.amd?define(["backbone","underscore"],function(e,t){n(e,t)}):"undefined"!=typeof exports&&"undefined"!=typeof require?module.exports=function(e){n(e,require("underscore"))}:n(Backbone,_)}(function(n,e){var t=n.sync;n.sync=function(s,c,i){function r(n){var e=i[n];i[n]=function(){var t=arguments;e&&e.apply(this,t);var s=o.indexOf(d);s>=0&&o.splice(s,1);var r="success"===n?[n,c,i]:[n,c,t[1],t[2],i];d.trigger.apply(d,r),r.splice(0,0,"complete"),d.trigger.apply(d,r),0===o.length&&c.trigger("async:load-complete")}}i=i||{};var o=c._pendingAsyncEvents=c._pendingAsyncEvents||[],a=i&&i.event||s,d=e.extend({},n.Events);o.push(d),c.trigger("async",a,d,i),c.trigger("async:"+a,d,i),n.asyncHandler&&(n.asyncHandler.trigger("async",a,c,d,i),n.asyncHandler.trigger("async:"+a,c,d,i)),r("success"),r("error"),t.call(this,s,c,i)},e.each([n.Model,n.Collection],function(n){n.prototype.isLoading=function(){return this._pendingAsyncEvents&&this._pendingAsyncEvents.length>0?this._pendingAsyncEvents:!1}})});

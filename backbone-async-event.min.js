/*!
 * [backbone-async-event](https://github.com/jhudson8/backbone-async-event) v0.1.2;  MIT license; Joe Hudson<joehud@gmail.com>
 */
!function(n){"function"==typeof define&&define.amd?define(["backbone","underscore"],function(e,t){n(e,t)}):"undefined"!=typeof exports&&"undefined"!=typeof require?n(require("backbone"),require("underscore")):n(Backbone,_)}(function(n,e){var t=n.sync;n.sync=function(r,c,i){function s(n){var e=i[n];i[n]=function(){var t=arguments;e&&e.apply(this,t);var r=a.indexOf(d);r>=0&&a.splice(r,1);var s="success"===n?[n,c,i]:[n,c,t[1],t[2],i];d.trigger.apply(d,s),s.splice(0,0,"complete"),d.trigger.apply(d,s),0===a.length&&c.trigger("async:load-complete")}}i=i||{};var a=c._pendingAsyncEvents=c._pendingAsyncEvents||[],o=i&&i.event||r,d=e.extend({},n.Events);a.push(d),c.trigger("async",o,d,i),c.trigger("async:"+o,d,i),n.asyncHandler&&(n.asyncHandler.trigger("async",o,c,d,i),n.asyncHandler.trigger("async:"+o,c,d,i)),s("success"),s("error"),t.call(this,r,c,i)},e.each([n.Model,n.Collection],function(n){n.prototype.isLoading=function(){return this._pendingAsyncEvents&&this._pendingAsyncEvents.length>0?this._pendingAsyncEvents:!1}})});

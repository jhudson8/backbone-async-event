/*!
 * backbone-async-event v0.1.0;  MIT license
 */
!function(n){"function"==typeof define&&define.amd?define(["backbone","underscore"],function(e,t){n(e,t)}):n(Backbone,_)}(function(n,e){var t=n.sync;n.sync=function(i,c,s){function r(n){var t=s[n];s[n]=function(){var i=arguments;t&&t.apply(this,i);var s=o.indexOf(g);s>=0&&o.splice(s,1);var r=arguments;e.each([p,g],function(t){var i=e.toArray(r);i.splice(0,0,n),i.splice(1,0,c),t.trigger.apply(t,i),i.splice(0,0,"complete"),t.trigger.apply(t,i)}),0===o.length&&(c.trigger("async:load-complete"),delete c._pendingAsyncEvents)}}s=s||{};var o=c._pendingAsyncEvents=c._pendingAsyncEvents||[],a=s&&s.event||i,p=e.extend({},n.Events),g=e.extend({},n.Events);o.push(g),c.trigger("async",a,p),c.trigger("async:"+a,g),r("success"),r("error"),t.call(this,i,c,s)},e.each([n.Model,n.Collection],function(n){n.prototype.isLoading=function(){return this._pendingAsyncEvents&&this._pendingAsyncEvents.length>0?this._pendingAsyncEvents:!1}})});
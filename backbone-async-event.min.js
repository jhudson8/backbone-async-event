/*!
 * [backbone-async-event](https://github.com/jhudson8/backbone-async-event) v0.1.1;  MIT license; Joe Hudson<joehud@gmail.com>
 */
!function(e){"function"==typeof define&&define.amd?define(["backbone","underscore"],function(n,t){e(n,t)}):"undefined"!=typeof exports&&"undefined"!=typeof require?e(require("backbone"),require("underscore")):e(Backbone,_)}(function(e,n){var t=e.sync;e.sync=function(i,r,s){function c(e){var n=s[e];s[e]=function(){var t=arguments;n&&n.apply(this,t);var i=o.indexOf(a);i>=0&&o.splice(i,1);var c="success"===e?[e,r,s]:[e,r,t[1],t[2],s];g.trigger.apply(g,c),a.trigger.apply(a,c),c.splice(0,0,"complete"),g.trigger.apply(g,c),a.trigger.apply(a,c),0===o.length&&(r.trigger("async:load-complete"),delete r._pendingAsyncEvents)}}s=s||{};var o=r._pendingAsyncEvents=r._pendingAsyncEvents||[],p=s&&s.event||i,g=n.extend({},e.Events),a=n.extend({},e.Events);o.push(a),r.trigger("async",p,g),r.trigger("async:"+p,a),c("success"),c("error"),t.call(this,i,r,s)},n.each([e.Model,e.Collection],function(e){e.prototype.isLoading=function(){return this._pendingAsyncEvents&&this._pendingAsyncEvents.length>0?this._pendingAsyncEvents:!1}})});